# 権限の説明（v1.3.2）

この拡張機能が要求する権限と、その必要性・使用箇所を項目ごとにまとめました。いずれのデータも外部へ送信されず、ブラウザ内にのみ保存・処理されます。

## 追加された権限（今回）

- downloads: デバッグログをユーザーが任意でダウンロードできるようにするため
  - 目的: 不具合報告時の調査を容易にするため、ポップアップからショートカットでログを書き出します
  - 使用箇所: `background.js` の `downloadLogs` ハンドラ（`chrome.downloads.download(...)`）
  - 動作: テキストファイルを生成して保存ダイアログを表示します。勝手に外部へ送信することはありません

## 既存の権限

- storage: 利用時間の記録や一時解除時間・設定の保存に使用
  - 使用箇所:
    - `contentScript.js`: `unblockUntil`, `usageHistory` の参照
    - `popup.js`: 一時解除時間（分）、リダイレクトURL、履歴の保存
    - `background.js`: デバッグログ（`chrome.storage.local`）やリダイレクト用タブ管理
  - 目的: ユーザー設定と統計（直近30日の使用時間）をブラウザ内に保持するため

- tabs: 現在のタブへのメッセージ送信やタブの状態取得に使用
  - 使用箇所:
    - `popup.js`: アクティブタブに `updateOverlay` / `updateRedirectURL` を送信
    - `background.js`: アクティブタブの確認・フォーカス切替（リダイレクト先のタブ再利用など）
  - 目的: ブロック状態の反映や、ユーザー操作に応じたタブ制御のため

- host_permissions: `*://x.com/*`, `*://twitter.com/*`
  - 使用箇所: `contentScript.js` を Twitter / X のページに注入するため
  - 目的: ブロック用オーバーレイの表示・制御、投稿モーダル検出などドメイン固有の処理

## データとプライバシー

- 個人情報の収集は行いません
- 保存するデータはブラウザの `chrome.storage` のみ（設定・解除時間・使用履歴・ローカルデバッグログ）
- ネットワーク送信は行いません（ログのダウンロードはローカルのファイル保存のみ）

## 最小権限の原則

- 権限は機能実現に必要な最小限に限定しています
- `downloads` はログの任意ダウンロード機能のために追加しました。通常利用時には動作しません

